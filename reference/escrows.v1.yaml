openapi: 3.0.0
info:
  title: escrows
  version: '1.0'
servers:
  - url: 'http://localhost:3000'
paths:
  /profiles:
    post:
      summary: Create Profile
      operationId: post-profiles
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Profile'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                profileId:
                  type: string
                  description: Merchant id in client system
                countryOfOrigin:
                  type: string
                  description: "Merchant's country of origin"
                  enum:
                    - US
                    - CN
                type:
                  type: string
                  description: Profile type
                  enum:
                    - INDIVIDUAL
                    - CORPORATION
                emial:
                  type: string
                  format: email
                  description: Merchant email address
                kyc:
                  type:
                    - string
                    - object
                  required:
                    - entityName
                    - entityType
                    - registryNumber
                    - regCertificateCopy
                    - legalRep
                  properties:
                    entityName:
                      type: string
                      description: Company name in English
                    entityType:
                      type: string
                      description: Business type
                    registryNumber:
                      type: string
                      description: Company number
                    regCertificateCopy:
                      type: string
                      description: Company liscens document name
                    legalRep:
                      type: object
                      required:
                        - name
                        - idNumber
                        - idFrontImg
                      properties:
                        name:
                          type: string
                          description: Legal Representative’s name in English
                        idNumber:
                          type: string
                          description: Legal Representative’s id number
                        idFrontImg:
                          type: string
                          description: Legal Representative’s id front document name
                        idBackImg:
                          type: string
                          description: Legal Representative’s id back document name. Optional if id type is passport
              required:
                - profileId
                - countryOfOrigin
                - type
                - emial
                - kyc
        description: ''
      description: |-
        Create an Avalara Fiscal Rep merchant profile in Lianlian Pay system.
        All required supporting document of a profile, such as `regCertificateCopy`, `idFrontImg`, `idBackImg` should be uploaded into Lianlina Pay system before the create profile request.
      tags:
        - Methods
  '/profiles/{profileId}':
    parameters:
      - schema:
          type: string
        name: profileId
        in: path
        required: true
    get:
      summary: Get Profile By ID
      tags:
        - Methods
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Profile'
      operationId: get-profiles-profileId
      description: Get a single profile details by profile id
  '/profiles/{profileId}/bills':
    parameters:
      - schema:
          type: string
        name: profileId
        in: path
        required: true
    post:
      summary: Create Bill
      operationId: post-profiles-profileId-bills
      responses:
        '200':
          description: OK
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                id:
                  type: string
                  description: Unique obligation bill id generated by client
                region:
                  type: string
                  description: Bill region/jurisdiction
                currency:
                  type: string
                  description: Bill currency
                amount:
                  type: string
                  description: Bill amount
                period:
                  type: string
                  description: Bill period
                dueDate:
                  type: string
                  description: Bill due date
                expireDate:
                  type: string
                  description: Bill expire date
                accountNo:
                  type: string
                  description: Payee account number
                accountName:
                  type: string
                  description: Payee account name
                bankName:
                  type: string
                  description: Payee bank name
                branchCode:
                  type: string
                  description: Payee branch code
                swift:
                  type: string
                  description: SWIFT
                rfb:
                  type: string
                memo:
                  type: string
              required:
                - id
                - region
                - currency
                - amount
                - period
                - dueDate
                - expireDate
                - accountNo
                - accountName
                - bankName
                - branchCode
                - swift
                - rfb
        description: ''
      description: Create a bill obligation for a profile
      tags:
        - Methods
  '/bills/{billId}':
    parameters:
      - schema:
          type: string
        name: billId
        in: path
        required: true
    get:
      summary: Get Bill By ID
      tags:
        - Methods
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Bill'
      operationId: get-profiles-profileId-bills-billId
      description: Get a bill details by its id
  '/bills/{billId}/submit':
    parameters:
      - schema:
          type: string
        name: billId
        in: path
        required: true
    put:
      summary: Submit Bill
      operationId: put-bills-billId-submit
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Bill'
      description: "Submit a single bill. \nAfter a successful submitting, Lianlian Pay will process payment to the bill payee."
      tags:
        - Methods
  '/bills/{billId}/void':
    parameters:
      - schema:
          type: string
        name: billId
        in: path
        required: true
    put:
      summary: Void Bill
      operationId: put-bills-billId-void
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Bill'
      description: |
        Void a unsubmitted bill by bill id.
        When you void a bill, that bill’s status is recorded as `VOIDED` and unprocessed payment of this bill will not be processed. Bills that have been previously processed and paid to a tax authority are no longer available to be voided.
        Bills have fundingStatus as `BILL_CANCELING`, `BILL_CANCELED`, `BILL_EXPIRED` or paymentStatus as `PAYMENT_PROCESSING`, `BILL_PAID` cannot be voided.
      tags:
        - Methods
  '/profiles/{profileId}/accounts':
    parameters:
      - schema:
          type: string
        name: profileId
        in: path
        required: true
    post:
      summary: Create Account
      operationId: post-profiles-profileId-accounts
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Account'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                region:
                  type: string
                  description: Account region
                currency:
                  type: string
                  description: Account currency
              required:
                - region
                - currency
        description: ''
      description: Create an account for a profile
      tags:
        - Methods
    get:
      summary: Get Profile Accounts
      operationId: get-profiles-profileId-accounts
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Account'
        '':
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Account'
          description: 'This API returns a list of `Account` object of a profile. If no applicable account exists, empty list will be returned. '
      description: Get a list of accounts of a profile.
      parameters:
        - schema:
            type: string
            enum:
              - FUNDING
              - PAYMENT
              - COLLECTION
          in: query
          name: type
          description: Account type
      tags:
        - Methods
  '/accounts/{accountId}':
    parameters:
      - schema:
          type: string
        name: accountId
        in: path
        required: true
    get:
      summary: Get Account By ID
      tags:
        - Methods
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Account'
      operationId: get-accounts-accountId
      description: Get a single account details by its account id.
  /documents:
    post:
      summary: Upload Document
      operationId: post-documents
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Document'
      description: "Upload an image or PDF attachment. \nImage attachments can be of the format PDF, JPEG, or PNG. To upload a multi-page image, please use the PDF data type."
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  description: Document name
                size:
                  type: integer
                  description: Document file size
              required:
                - name
                - size
        description: ''
      tags:
        - Methods
  '/documents/{documentId}':
    parameters:
      - schema:
          type: string
        name: documentId
        in: path
        required: true
    get:
      summary: Your GET endpoint
      tags:
        - Methods
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Document'
      operationId: get-documents-name
      description: Get document details by id
  /webhooks:
    get:
      summary: Get Webhook Registration List
      tags:
        - Methods
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Webhook'
      operationId: get-webhooks
      description: |-
        Get a list of webhook registrations of a client. If no registrations, empty list will be returned.
        Return type is `List<Webhook>`
    post:
      summary: Register Webhook
      operationId: post-webhooks
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Webhook'
      description: Register a webhook in Lianlian Pay system. Registered webhook will be used to send events generated by Lianlian Pay system.
      tags:
        - Methods
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                topic:
                  type: array
                  items:
                    $ref: '#/components/schemas/Event-Topic'
                url:
                  type: string
                isEnabled:
                  type: boolean
              required:
                - name
                - topic
                - url
                - isEnabled
  '/webhook/{webhookId}':
    parameters:
      - schema:
          type: string
        name: webhookId
        in: path
        required: true
    get:
      summary: Get Webhook Registration
      tags:
        - Methods
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Webhook'
      operationId: get-webhook-webhookId
      description: Get a webhook registration details by id
    put:
      summary: Edit Webhook Registration
      operationId: put-webhook-webhookId
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Webhook'
      description: 'Edit a webhook registration, such as turn on/off webhook, update webhook url, update topic registrations.'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                isEnabled:
                  type: boolean
                url:
                  type: string
                topic:
                  type: array
                  items:
                    $ref: '#/components/schemas/Event-Topic'
              required:
                - isEnabled
                - url
                - topic
      tags:
        - Methods
    delete:
      summary: Delete Webhook Registration
      operationId: delete-webhook-webhookId
      responses:
        '200':
          description: OK
      description: Delete a webhook registration by id.
      tags:
        - Methods
  '/events/{eventId}':
    parameters:
      - schema:
          type: string
        name: eventId
        in: path
        required: true
    get:
      summary: Get Event
      tags:
        - Methods
      responses: {}
      operationId: get-events-eventId
  /events:
    get:
      summary: Get Events
      tags:
        - Methods
      responses: {}
      operationId: get-events
components:
  schemas:
    Profile:
      title: Profile
      type: object
      description: Profile is a data set of an Avalara customer description in Lianlian Pay system.
      x-tags:
        - Objects
      properties:
        id:
          type: string
          description: Merchant id in client system
        countryOfOrigin:
          $ref: '#/components/schemas/Country-Of-Origin'
        type:
          $ref: '#/components/schemas/Profile-Type'
        kyc:
          $ref: '#/components/schemas/CN-ENTITY-KYC'
        status:
          $ref: '#/components/schemas/Profile-Status'
      required:
        - id
        - countryOfOrigin
        - type
        - kyc
        - status
    Bill:
      title: Bill
      type: object
      description: "Data set of an Avalara customer’s tax obligation description in Lianlian Pay system. \nSuch object helps Avalara to manage merchants’ tax obligation."
      x-tags:
        - Objects
      properties:
        id:
          type: string
          description: bill(obligation) id in client system
        region:
          type: string
          description: bill(obligation) region
        currency:
          $ref: '#/components/schemas/Currency'
        amount:
          type: string
          description: bill(obligation) amount
        period:
          type: string
          description: bill(obligation) period
        dueDate:
          type: string
          description: bill(obligation) due date
          format: date
          example: 'YYYY-MM-DD, e.g. 2010-01-21'
        expireDate:
          type: string
          description: bill(obligation) expire date
          format: date
          example: 'YYYY-MM-DD, e.g. 2010-01-21'
        payee:
          $ref: '#/components/schemas/Account-Info'
        createTime:
          type: string
          format: date-time
          example: 'UTC timestamp, e.g. 2019-01-01T00:00:000Z'
          description: Bill created time
        modifyTime:
          type: string
          format: date-time
          example: 'UTC timestamp, e.g. 2019-01-01T00:00:000Z'
          description: Bill last modified time
        fundingTime:
          type: string
          format: date-time
          example: 'UTC timestamp, e.g. 2019-01-01T00:00:000Z'
          description: Bill funded time
        fundingStatus:
          $ref: '#/components/schemas/Funding-Status'
        paymentTime:
          type: string
          format: date-time
          example: 'UTC timestamp, e.g. 2019-01-01T00:00:000Z'
          description: Bill payment time
        paymentStatus:
          $ref: '#/components/schemas/Payment-Status'
      required:
        - id
        - region
        - currency
        - amount
        - period
        - dueDate
        - expireDate
        - payee
        - fundingStatus
        - paymentStatus
    Address:
      title: Address
      type: object
      properties:
        lineOne:
          type: string
          description: Address Line 1
        lineTwo:
          type: string
          description: Address Line 2
        city:
          type: string
          description: City/Town
        province:
          type: string
          description: Province/Region/State
        country:
          type: string
          description: Country
        postalCode:
          type: string
          description: Postal Code/Zip Code
      required:
        - lineOne
        - city
        - province
        - country
        - postalCode
      description: Address object
      x-tags:
        - Objects
    Account:
      title: Account
      type: object
      description: 'Data object to describe a bank account in Lianlian Pay system. '
      x-tags:
        - Objects
      properties:
        balance:
          type: string
          description: Account balance in account currency
        currency:
          $ref: '#/components/schemas/Currency'
        accountInfo:
          $ref: '#/components/schemas/Account-Info'
        type:
          type: string
          enum:
            - PAYMENT
            - FUNDING
          description: 'Account type, PAYMENT/FUNDING'
        id:
          type: string
          description: Account id in Lianlina Pay system
      required:
        - balance
        - currency
        - type
        - id
    CN-ENTITY-KYC:
      title: CN ENTITY KYC
      type: object
      description: ''
      x-tags:
        - Objects
      properties:
        entityName:
          type: string
          description: Company name in English
        entityType:
          $ref: '#/components/schemas/Entity-Type'
        registryNumber:
          type: string
          description: Company number
        regCertificateCopy:
          $ref: ''
        email:
          type: string
          description: Merchant email address
          format: email
        legalRep:
          $ref: '#/components/schemas/Legal-Representative'
        ubo:
          type: array
          description: 'Profile List<UBO> information '
          items:
            $ref: '#/components/schemas/UBO'
      required:
        - entityName
        - entityType
        - registryNumber
        - regCertificateCopy
    Legal-Representative:
      title: Legal-Representative
      type: object
      description: ''
      x-tags:
        - Objects
      properties:
        name:
          type: string
        idType:
          $ref: '#/components/schemas/ID-Type'
        idNumber:
          type: string
        idFrontImg:
          $ref: '#/components/schemas/Document'
        idBackImg:
          $ref: '#/components/schemas/Document'
        idIssueDate:
          type: string
          format: date
          example: 'YYYY-MM-DD, e.g. 2010-01-21'
        idExpireDate:
          type: string
          format: date
          example: 'YYYY-MM-DD, e.g. 2010-01-21'
        nationality:
          $ref: '#/components/schemas/Country-Of-Origin'
        birthday:
          type: string
          format: date
          example: 'YYYY-MM-DD, e.g. 2010-01-21'
        mobile:
          type: string
        residentialAddress:
          $ref: '#/components/schemas/Address'
      required:
        - name
        - idNumber
        - idFrontImg
        - idBackImg
    UBO:
      title: UBO
      type: object
      x-tags:
        - Objects
      properties:
        name:
          type: string
          description: UBO name in English
        idType:
          $ref: '#/components/schemas/ID-Type'
        idNumber:
          type: string
          description: UBO id number
        idFrontImg:
          $ref: '#/components/schemas/Document'
        idBackImg:
          $ref: '#/components/schemas/Document'
        idIssueDate:
          type: string
          description: UBO id issue date
          format: date
          example: 'YYYY-MM-DD, e.g. 2010-01-21'
        idExpireDate:
          type: string
          description: UBO id expiration date
          format: date
          example: 'YYYY-MM-DD, e.g. 2010-01-21'
        birthday:
          type: string
          format: date
          example: 'YYYY-MM-DD, e.g. 2010-01-21'
          description: UBO birthday
        residentialAddress:
          $ref: '#/components/schemas/Address'
        shareholdingRatio:
          type: string
          description: UBO share holding ratio
      required:
        - name
        - idNumber
        - idFrontImg
        - idBackImg
      description: ''
    Error:
      title: Error
      type: object
      x-tags:
        - Objects
      properties:
        code:
          type: string
        message:
          type: string
      required:
        - code
        - message
    Account-Info:
      title: Account-Info
      type: object
      description: Account details
      properties:
        number:
          type: string
          description: Account number
        name:
          type: string
          description: Account name
        bankName:
          type: string
          description: Bank name
        branchCode:
          type: string
          description: Branch code
        swift:
          type: string
          description: Bank SWIFT code
        region:
          type: string
          description: 'Account region, two letter region code'
        coverLetter:
          $ref: '#/components/schemas/Document'
      required:
        - number
        - name
        - swift
        - region
      x-tags:
        - Objects
    Document:
      title: Document
      type: object
      description: File object in Lianlian Pay system
      x-tags:
        - Objects
      properties:
        name:
          type: string
          description: Document name
        size:
          type: integer
          description: Document size
        createTime:
          type: string
          description: 'Document create time, UTC timestamp'
          format: date-time
          example: 'UTC timestamp, e.g. 2019-01-01T00:00:000Z'
        id:
          type: string
      required:
        - name
    Event:
      title: Event
      type: object
      x-tags:
        - Objects
      properties:
        id:
          type: string
        topic:
          $ref: '#/components/schemas/Event-Topic'
        message:
          type: string
        createTime:
          type: string
        modifyTime:
          type: string
      required:
        - id
        - topic
        - message
    TBD-Notification:
      title: TBD-Notification
      type: object
      properties:
        id:
          type: string
      description: ''
      x-tags:
        - Methods
    TBD-Notification-Template:
      title: Notification-Template
      type: object
      properties:
        id:
          type: string
      x-tags:
        - Objects
      description: ''
    Event-Topic:
      type: string
      title: Event-Topic-Enumeration
      description: |
        Lianlian Pay system notification topics. One of:

        | Value | Description |
        |--------|------------|
        | profileStatusChanged | Profile status changed notification |
        | fundingReceived | Funding received in profile’s receiving account notification |
        | billEscrow | Escrowed from receiving account notification |
        | billPayment | Payment processed notification |
        | billRefund | Payment refunded to receiving account notification |
        | paymentAccountCreated | Payment account application complete, account assigned notification |
        | paymentAccountDebited | Tax authority issued ACH direct debit and debited from payment account notification |
      x-tags:
        - Enumerations
    Webhook:
      title: Webhook
      type: object
      x-tags:
        - Objects
      properties:
        id:
          type: string
        url:
          type: string
        isEnabled:
          type: boolean
        topics:
          type: array
          items:
            $ref: '#/components/schemas/Event-Topic'
        createTime:
          type: string
        modifyTime:
          type: string
      required:
        - id
        - url
        - isEnabled
        - topics
        - createTime
    Payment-Status:
      title: Payment-Status
      type: string
      x-tags:
        - Enumerations
      description: |
        Bill payment status in Lianlian Pay system. One of:

        | Value | Description |
        |-------|-------------|
        | INIT | Waiting for payment request |
        | PROCESSING | Payment request received, payment is under processing |
        | PAID | Payment complete |
        | FAILED | Payment failed |
    Funding-Status:
      title: Funding-Status
      type: string
      x-tags:
        - Enumerations
      description: |
        Bill funding status in Lianlian Pay system. One of:

        | Value | Description |
        |-------|-------------|
        | INIT | Bill created, waiting for processing |
        | FUNDING_PROCESSING | Waiting for funding from merchant |
        | FUNDED| Received funding from merchant, bill fully funded |
        | CANCELING | Received cancel bill request, request is under processing |
        | CANCELED | Cancel bill request complete |
        | EXPIRED | Receiving no funding or not enough funding from merchant before bill expiration date |
    Profile-Status:
      title: Profile-Status
      type: string
      x-tags:
        - Enumerations
      description: |-
        Profile status in Lianlian Pay system. One of:

        | Value | Description |
        |-------|-------------|
        | UNDER_REVIEW | |
        | ACTIVE | |
        | FAILED | |
        | ERROR| |
    Profile-Type:
      title: Profile-Type
      x-tags:
        - Enumerations
      description: |-
        Profile type enumerations in Lianlian Pay system. One of:

        | Value | Description |
        |-------|-------------|
        | INDIVIDUAL | |
        | COMPANY |  |
      type: string
    Country-Of-Origin:
      title: Country-Of-Origin
      type: string
      x-tags:
        - Enumerations
      description: |-
        Supported country of origin in Lianlian Pay system. One of:

        | Value | Description |
        |-------|-------------|
        | CN | |
        | US | |
    Entity-Type:
      title: Entity-Type
      type: string
      x-tags:
        - Enumerations
      description: |-
        Entity type enumerations in Lianlian Pay system. One of:

        | Value | Description |
        |-------|-------------|
        |  |  |
    ID-Type:
      title: ID-Type
      type: string
      x-tags:
        - Enumerations
      description: |-
        Supported ID types in Lianlian Pay system. One of:

        | Value | Description |
        |-------|-------------|
        | PASSPORT |  |
        | IDCARD |  |
    Currency:
      title: Currency
      type: string
      x-tags:
        - Enumerations
      description: |-
        Supported currency in Lianlian Pay system. One of:

        | Value | Description | Payment Account | Funding Account |
        |-------|-------------|-----------------|-----------------|
        | CNY | | | |
        | EUR | | | |
